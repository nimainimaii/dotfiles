#!/bin/sh
BACKUP_LIST="$HOME/.config/backup_list"
alias config='/usr/bin/git --git-dir=$HOME/.cfg/ --work-tree=$HOME'
sed "s/[ \t]*\#.*//g ; s|\~|$HOME|g; s/[ \t]*//g; /^$/d" "$BACKUP_LIST" | \
  xargs /usr/bin/git --git-dir="$HOME"/.cfg/ --work-tree="$HOME" add
config commit -m "$(date)"
while getopts ":s" opt; do
  case $opt in 
    s) 
      nc -z 8.8.8.8 53 && \
      echo "Pushing to remote" && \
      config push origin master || \
      echo "Not able to push to GitHub, try again later"
      ;;
    \?) 
      echo "invalid flag -$OPTARG" >&2 
      exit 1
      ;;
  esac
done
