#!/bin/sh

LOCKSCREEN_FILE="$HOME/.config/lockscreen"

gethex(){
	LINE="$(xrdb -query | grep "^*.${1}:")"
	echo "${LINE##*	#}"
}

getfont() {
	LINE="$(xrdb -query | grep "^*.font:")"
	LINE="${LINE##*:	}"
	echo "${LINE%%:*}"
}

# yes, running grep, cut, sed and tail these many times is cringe
FONT=$(getfont)
FGCOL=$(gethex foreground)
RED=$(gethex color1)
BLUE=$(gethex color4)
YELLOW=$(gethex color3)
WHITE=$(gethex color15)
GREEN=$(gethex color2)
PURPLE=$(gethex color5)

i3lock -i "${LOCKSCREEN_FILE}" \
--clock \
--radius=150 \
--timecolor="${FGCOL}" \
--datecolor="${FGCOL}" \
--time-font="${FONT}" \
--date-font="${FONT}" \
--layout-font="${FONT}" \
--verif-font="${FONT}" \
--wrong-font="${FONT}" \
--greeter-font="${FONT}" \
--insidevercolor="${BLUE}" \
--insidewrongcolor="${RED}" \
--insidecolor="${PURPLE}" \
--ringvercolor="${BLUE}" \
--ringwrongcolor="${RED}" \
--ringcolor="${PURPLE}" \
--linecolor="${WHITE}" \
--keyhlcolor="${YELLOW}" \
--bshlcolor="${GREEN}" \
--timestr="%I:%M:%S %p" \
--datestr="%A, %d %B" \
--datesize=20 \
--veriftext="Verifying" \
--wrongtext="Wrong" \
