#!/bin/sh

LOCKSCREEN_FILE="$HOME/.config/lockscreen"

gethex(){
	LINE="$(xrdb -query | grep "^\*${1}:")"
	echo "${LINE##*	#}"
}

getfont() {
	LINE="$(xrdb -query | grep "^\*\.font:")"
	LINE="${LINE##*:	}"
	echo "${LINE%%:*}"
}

# yes, running grep, cut, sed and tail these many times is cringe
FONT=$(getfont)
RED=$(gethex color1)
BLUE=$(gethex color4)
YELLOW=$(gethex color3)
WHITE=$(gethex color15)
GREEN=$(gethex color2)
PURPLE=$(gethex color5)

i3lock -i "${LOCKSCREEN_FILE}" \
--clock \
--radius=150 \
--time-color="ffffff" \
--date-color="ffffff" \
--time-font="${FONT}" \
--date-font="${FONT}" \
--layout-font="${FONT}" \
--verif-font="${FONT}" \
--wrong-font="${FONT}" \
--greeter-font="${FONT}" \
--insidever-color="${BLUE}" \
--insidewrong-color="${RED}" \
--inside-color="${PURPLE}" \
--ringver-color="${BLUE}" \
--ringwrong-color="${RED}" \
--ring-color="${PURPLE}" \
--line-color="${WHITE}" \
--keyhl-color="${YELLOW}" \
--bshl-color="${GREEN}" \
--time-str="%I:%M:%S %p" \
--date-str="%A, %d %B" \
--date-size=20 \
--verif-text="Verifying" \
--wrong-text="Wrong" \
