#!/bin/sh

# To add new themes,
# install neovim theme and add it to theme setting function
# add xresources file to $HOME/.config/X11

THEMES="gruvbox_dark
gruvbox_light
dracula
classic
moonfly"

if [ -n "$*" ]
then
	CHOOSEN_THEME="$*"
else
	CHOOSEN_THEME=$(echo "$THEMES" | dmenu)
fi

if echo "$THEMES" | grep -q "^${CHOOSEN_THEME}$"
then
	xrdb -merge "${XDG_CONFIG_HOME}/X11/${CHOOSEN_THEME}"

	# shellcheck disable=SC2046
	kill -s USR1 $(pidof st)

	xdotool key "Super+F12"

	nvimcmd ":lua SetColorScheme('${CHOOSEN_THEME}')"

	restart-dunst

	oomox-cli -o "oomox-xresources" -t "${XDG_DATA_HOME}/themes" "/opt/oomox/scripted_colors/xresources/xresources-reverse" && killall xsettingsd ; xsettingsd&

	[ -z "$*" ] && notify-send "Theme set to ${CHOOSEN_THEME}"
else
	exit 1
fi
